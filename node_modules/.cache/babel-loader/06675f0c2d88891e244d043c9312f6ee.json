{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __values = this && this.__values || function (o) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator],\n      i = 0;\n  if (m) return m.call(o);\n  return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar BarcodeFormat_1 = require(\"../../../BarcodeFormat\");\n\nvar NotFoundException_1 = require(\"../../../NotFoundException\");\n\nvar Result_1 = require(\"../../../Result\");\n\nvar MathUtils_1 = require(\"../../../common/detector/MathUtils\");\n\nvar AbstractRSSReader_1 = require(\"../../rss/AbstractRSSReader\");\n\nvar DataCharacter_1 = require(\"../../rss/DataCharacter\");\n\nvar FinderPattern_1 = require(\"../../rss/FinderPattern\");\n\nvar RSSUtils_1 = require(\"../../rss/RSSUtils\");\n\nvar AbstractExpandedDecoderComplement_1 = require(\"./decoders/AbstractExpandedDecoderComplement\");\n\nvar ExpandedPair_1 = require(\"./ExpandedPair\");\n\nvar ExpandedRow_1 = require(\"./ExpandedRow\");\n\nvar BitArrayBuilder_1 = require(\"./BitArrayBuilder\");\n\nvar System_1 = require(\"../../../util/System\"); // import java.util.ArrayList;\n// import java.util.Iterator;\n// import java.util.List;\n// import java.util.Map;\n// import java.util.Collections;\n\n\nvar RSSExpandedReader =\n/** @class */\nfunction (_super) {\n  __extends(RSSExpandedReader, _super);\n\n  function RSSExpandedReader() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.pairs = new Array(RSSExpandedReader.MAX_PAIRS);\n    _this.rows = new Array();\n    _this.startEnd = [2];\n    return _this;\n  }\n\n  RSSExpandedReader.prototype.decodeRow = function (rowNumber, row, hints) {\n    // Rows can start with even pattern in case in prev rows there where odd number of patters.\n    // So lets try twice\n    //this.pairs.clear();\n    this.pairs.length = 0;\n    this.startFromEven = false;\n\n    try {\n      return RSSExpandedReader.constructResult(this.decodeRow2pairs(rowNumber, row));\n    } catch (e) {\n      // OK\n      console.log(e);\n    }\n\n    this.pairs.length = 0;\n    this.startFromEven = true;\n    return RSSExpandedReader.constructResult(this.decodeRow2pairs(rowNumber, row));\n  };\n\n  RSSExpandedReader.prototype.reset = function () {\n    this.pairs.length = 0;\n    this.rows.length = 0;\n  }; // Not private for testing\n\n\n  RSSExpandedReader.prototype.decodeRow2pairs = function (rowNumber, row) {\n    var done = false;\n\n    while (!done) {\n      try {\n        this.pairs.push(this.retrieveNextPair(row, this.pairs, rowNumber));\n      } catch (NotFoundException) {\n        if (!this.pairs.length) {\n          throw new NotFoundException();\n        } // exit this loop when retrieveNextPair() fails and throws\n\n\n        done = true;\n      }\n    } // TODO: verify sequence of finder patterns as in checkPairSequence()\n\n\n    if (this.checkChecksum()) {\n      return this.pairs;\n    }\n\n    var tryStackedDecode;\n\n    if (this.rows.length) {\n      tryStackedDecode = true;\n    } else {\n      tryStackedDecode = false;\n    } //let tryStackedDecode = !this.rows.isEmpty();\n\n\n    this.storeRow(rowNumber, false); // TODO: deal with reversed rows\n\n    if (tryStackedDecode) {\n      // When the image is 180-rotated, then rows are sorted in wrong direction.\n      // Try twice with both the directions.\n      var ps = this.checkRowsBoolean(false);\n\n      if (ps != null) {\n        return ps;\n      }\n\n      ps = this.checkRowsBoolean(true);\n\n      if (ps != null) {\n        return ps;\n      }\n    }\n\n    throw new NotFoundException_1.default();\n  }; //Need to Verify\n\n\n  RSSExpandedReader.prototype.checkRowsBoolean = function (reverse) {\n    // Limit number of rows we are checking\n    // We use recursive algorithm with pure complexity and don't want it to take forever\n    // Stacked barcode can have up to 11 rows, so 25 seems reasonable enough\n    if (this.rows.length > 25) {\n      this.rows.length = 0; // We will never have a chance to get result, so clear it\n\n      return null;\n    }\n\n    this.pairs.length = 0;\n\n    if (reverse) {\n      this.rows = this.rows.reverse(); //Collections.reverse(this.rows);\n    }\n\n    var ps = null;\n\n    try {\n      ps = this.checkRows(new Array(), 0);\n    } catch (e) {\n      // OK\n      console.log(e);\n    }\n\n    if (reverse) {\n      this.rows = this.rows.reverse(); //Collections.reverse(this.rows);\n    }\n\n    return ps;\n  }; // Try to construct a valid rows sequence\n  // Recursion is used to implement backtracking\n\n\n  RSSExpandedReader.prototype.checkRows = function (collectedRows, currentRow) {\n    var e_1, _a;\n\n    for (var i = currentRow; i < this.rows.length; i++) {\n      var row = this.rows[i];\n      this.pairs.length = 0;\n\n      try {\n        for (var collectedRows_1 = __values(collectedRows), collectedRows_1_1 = collectedRows_1.next(); !collectedRows_1_1.done; collectedRows_1_1 = collectedRows_1.next()) {\n          var collectedRow = collectedRows_1_1.value;\n          this.pairs.push(collectedRow.getPairs());\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (collectedRows_1_1 && !collectedRows_1_1.done && (_a = collectedRows_1.return)) _a.call(collectedRows_1);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n\n      this.pairs.push(row.getPairs());\n\n      if (!RSSExpandedReader.isValidSequence(this.pairs)) {\n        continue;\n      }\n\n      if (this.checkChecksum()) {\n        return this.pairs;\n      }\n\n      var rs = new Array(collectedRows);\n      rs.push(row);\n\n      try {\n        // Recursion: try to add more rows\n        return this.checkRows(rs, i + 1);\n      } catch (e) {\n        // We failed, try the next candidate\n        console.log(e);\n      }\n    }\n\n    throw new NotFoundException_1.default();\n  }; // Whether the pairs form a valid find pattern sequence,\n  // either complete or a prefix\n\n\n  RSSExpandedReader.isValidSequence = function (pairs) {\n    var e_2, _a;\n\n    try {\n      for (var _b = __values(RSSExpandedReader.FINDER_PATTERN_SEQUENCES), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var sequence = _c.value;\n\n        if (pairs.length > sequence.length) {\n          continue;\n        }\n\n        var stop_1 = true;\n\n        for (var j = 0; j < pairs.length; j++) {\n          if (pairs[j].getFinderPattern().getValue() != sequence[j]) {\n            stop_1 = false;\n            break;\n          }\n        }\n\n        if (stop_1) {\n          return true;\n        }\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n\n    return false;\n  };\n\n  RSSExpandedReader.prototype.storeRow = function (rowNumber, wasReversed) {\n    // Discard if duplicate above or below; otherwise insert in order by row number.\n    var insertPos = 0;\n    var prevIsSame = false;\n    var nextIsSame = false;\n\n    while (insertPos < this.rows.length) {\n      var erow = this.rows[insertPos];\n\n      if (erow.getRowNumber() > rowNumber) {\n        nextIsSame = erow.isEquivalent(this.pairs);\n        break;\n      }\n\n      prevIsSame = erow.isEquivalent(this.pairs);\n      insertPos++;\n    }\n\n    if (nextIsSame || prevIsSame) {\n      return;\n    } // When the row was partially decoded (e.g. 2 pairs found instead of 3),\n    // it will prevent us from detecting the barcode.\n    // Try to merge partial rows\n    // Check whether the row is part of an allready detected row\n\n\n    if (RSSExpandedReader.isPartialRow(this.pairs, this.rows)) {\n      return;\n    }\n\n    this.rows.push(insertPos, new ExpandedRow_1.default(this.pairs, rowNumber, wasReversed));\n    this.removePartialRows(this.pairs, this.rows);\n  }; // Remove all the rows that contains only specified pairs\n\n\n  RSSExpandedReader.prototype.removePartialRows = function (pairs, rows) {\n    var e_3, _a, e_4, _b, e_5, _c;\n\n    try {\n      // for (Iterator<ExpandedRow> iterator = rows.iterator(); iterator.hasNext();) {\n      //   ExpandedRow r = iterator.next();\n      //   if (r.getPairs().size() == pairs.size()) {\n      //     continue;\n      //   }\n      //   boolean allFound = true;\n      //   for (ExpandedPair p : r.getPairs()) {\n      //     boolean found = false;\n      //     for (ExpandedPair pp : pairs) {\n      //       if (p.equals(pp)) {\n      //         found = true;\n      //         break;\n      //       }\n      //     }\n      //     if (!found) {\n      //       allFound = false;\n      //       break;\n      //     }\n      //   }\n      //   if (allFound) {\n      //     // 'pairs' contains all the pairs from the row 'r'\n      //     iterator.remove();\n      //   }\n      // }\n      for (var rows_1 = __values(rows), rows_1_1 = rows_1.next(); !rows_1_1.done; rows_1_1 = rows_1.next()) {\n        var row = rows_1_1.value;\n\n        if (row.getPairs().length === pairs.length) {\n          continue;\n        }\n\n        var allFound = true;\n\n        try {\n          for (var _d = __values(row.getPairs()), _e = _d.next(); !_e.done; _e = _d.next()) {\n            var p = _e.value;\n            var found = false;\n\n            try {\n              for (var pairs_1 = __values(pairs), pairs_1_1 = pairs_1.next(); !pairs_1_1.done; pairs_1_1 = pairs_1.next()) {\n                var pp = pairs_1_1.value;\n\n                if (ExpandedPair_1.default.equals(p, pp)) {\n                  found = true;\n                  break;\n                }\n              }\n            } catch (e_5_1) {\n              e_5 = {\n                error: e_5_1\n              };\n            } finally {\n              try {\n                if (pairs_1_1 && !pairs_1_1.done && (_c = pairs_1.return)) _c.call(pairs_1);\n              } finally {\n                if (e_5) throw e_5.error;\n              }\n            }\n\n            if (!found) {\n              allFound = false;\n            }\n          }\n        } catch (e_4_1) {\n          e_4 = {\n            error: e_4_1\n          };\n        } finally {\n          try {\n            if (_e && !_e.done && (_b = _d.return)) _b.call(_d);\n          } finally {\n            if (e_4) throw e_4.error;\n          }\n        }\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (rows_1_1 && !rows_1_1.done && (_a = rows_1.return)) _a.call(rows_1);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n  }; // Returns true when one of the rows already contains all the pairs\n\n\n  RSSExpandedReader.isPartialRow = function (pairs, rows) {\n    var e_6, _a, e_7, _b, e_8, _c;\n\n    try {\n      for (var rows_2 = __values(rows), rows_2_1 = rows_2.next(); !rows_2_1.done; rows_2_1 = rows_2.next()) {\n        var r = rows_2_1.value;\n        var allFound = true;\n\n        try {\n          for (var pairs_2 = __values(pairs), pairs_2_1 = pairs_2.next(); !pairs_2_1.done; pairs_2_1 = pairs_2.next()) {\n            var p = pairs_2_1.value;\n            var found = false;\n\n            try {\n              for (var _d = __values(r.getPairs()), _e = _d.next(); !_e.done; _e = _d.next()) {\n                var pp = _e.value;\n\n                if (p.equals(pp)) {\n                  found = true;\n                  break;\n                }\n              }\n            } catch (e_8_1) {\n              e_8 = {\n                error: e_8_1\n              };\n            } finally {\n              try {\n                if (_e && !_e.done && (_c = _d.return)) _c.call(_d);\n              } finally {\n                if (e_8) throw e_8.error;\n              }\n            }\n\n            if (!found) {\n              allFound = false;\n              break;\n            }\n          }\n        } catch (e_7_1) {\n          e_7 = {\n            error: e_7_1\n          };\n        } finally {\n          try {\n            if (pairs_2_1 && !pairs_2_1.done && (_b = pairs_2.return)) _b.call(pairs_2);\n          } finally {\n            if (e_7) throw e_7.error;\n          }\n        }\n\n        if (allFound) {\n          // the row 'r' contain all the pairs from 'pairs'\n          return true;\n        }\n      }\n    } catch (e_6_1) {\n      e_6 = {\n        error: e_6_1\n      };\n    } finally {\n      try {\n        if (rows_2_1 && !rows_2_1.done && (_a = rows_2.return)) _a.call(rows_2);\n      } finally {\n        if (e_6) throw e_6.error;\n      }\n    }\n\n    return false;\n  }; // Only used for unit testing\n\n\n  RSSExpandedReader.prototype.getRows = function () {\n    return this.rows;\n  }; // Not private for unit testing\n\n\n  RSSExpandedReader.constructResult = function (pairs) {\n    var binary = BitArrayBuilder_1.default.buildBitArray(pairs);\n    var decoder = AbstractExpandedDecoderComplement_1.createDecoder(binary);\n    var resultingString = decoder.parseInformation();\n    var firstPoints = pairs[0].getFinderPattern().getResultPoints();\n    var lastPoints = pairs[pairs.length - 1].getFinderPattern().getResultPoints();\n    var points = [firstPoints[0], firstPoints[1], lastPoints[0], lastPoints[1]];\n    return new Result_1.default(resultingString, null, null, points, BarcodeFormat_1.default.RSS_EXPANDED, null);\n  };\n\n  RSSExpandedReader.prototype.checkChecksum = function () {\n    var firstPair = this.pairs.get(0);\n    var checkCharacter = firstPair.getLeftChar();\n    var firstCharacter = firstPair.getRightChar();\n\n    if (firstCharacter == null) {\n      return false;\n    }\n\n    var checksum = firstCharacter.getChecksumPortion();\n    var s = 2;\n\n    for (var i = 1; i < this.pairs.size(); ++i) {\n      var currentPair = this.pairs.get(i);\n      checksum += currentPair.getLeftChar().getChecksumPortion();\n      s++;\n      var currentRightChar = currentPair.getRightChar();\n\n      if (currentRightChar != null) {\n        checksum += currentRightChar.getChecksumPortion();\n        s++;\n      }\n    }\n\n    checksum %= 211;\n    var checkCharacterValue = 211 * (s - 4) + checksum;\n    return checkCharacterValue == checkCharacter.getValue();\n  };\n\n  RSSExpandedReader.getNextSecondBar = function (row, initialPos) {\n    var currentPos;\n\n    if (row.get(initialPos)) {\n      currentPos = row.getNextUnset(initialPos);\n      currentPos = row.getNextSet(currentPos);\n    } else {\n      currentPos = row.getNextSet(initialPos);\n      currentPos = row.getNextUnset(currentPos);\n    }\n\n    return currentPos;\n  }; // not private for testing\n\n\n  RSSExpandedReader.prototype.retrieveNextPair = function (row, previousPairs, rowNumber) {\n    var isOddPattern = previousPairs.length % 2 == 0;\n\n    if (this.startFromEven) {\n      isOddPattern = !isOddPattern;\n    }\n\n    var pattern;\n    var keepFinding = true;\n    var forcedOffset = -1;\n\n    do {\n      this.findNextPair(row, previousPairs, forcedOffset);\n      pattern = this.parseFoundFinderPattern(row, rowNumber, isOddPattern);\n\n      if (pattern == null) {\n        forcedOffset = RSSExpandedReader.getNextSecondBar(row, this.startEnd[0]);\n      } else {\n        keepFinding = false;\n      }\n    } while (keepFinding); // When stacked symbol is split over multiple rows, there's no way to guess if this pair can be last or not.\n    // boolean mayBeLast = checkPairSequence(previousPairs, pattern);\n\n\n    var leftChar = this.decodeDataCharacter(row, pattern, isOddPattern, true);\n\n    if (!this.isEmptyPair(previousPairs) && previousPairs[previousPairs.length - 1].mustBeLast()) {\n      throw new NotFoundException_1.default();\n    }\n\n    var rightChar;\n\n    try {\n      rightChar = this.decodeDataCharacter(row, pattern, isOddPattern, false);\n    } catch (e) {\n      rightChar = null;\n      console.log(e);\n    }\n\n    return new ExpandedPair_1.default(leftChar, rightChar, pattern, true);\n  };\n\n  RSSExpandedReader.prototype.isEmptyPair = function (pairs) {\n    if (pairs.length === 0) {\n      return true;\n    }\n\n    return false;\n  };\n\n  RSSExpandedReader.prototype.findNextPair = function (row, previousPairs, forcedOffset) {\n    var counters = this.getDecodeFinderCounters();\n    counters[0] = 0;\n    counters[1] = 0;\n    counters[2] = 0;\n    counters[3] = 0;\n    var width = row.getSize();\n    var rowOffset;\n\n    if (forcedOffset >= 0) {\n      rowOffset = forcedOffset;\n    } else if (this.isEmptyPair(previousPairs)) {\n      rowOffset = 0;\n    } else {\n      var lastPair = previousPairs[previousPairs.length - 1];\n      rowOffset = lastPair.getFinderPattern().getStartEnd()[1];\n    }\n\n    var searchingEvenPair = previousPairs.length % 2 != 0;\n\n    if (this.startFromEven) {\n      searchingEvenPair = !searchingEvenPair;\n    }\n\n    var isWhite = false;\n\n    while (rowOffset < width) {\n      isWhite = !row.get(rowOffset);\n\n      if (!isWhite) {\n        break;\n      }\n\n      rowOffset++;\n    }\n\n    var counterPosition = 0;\n    var patternStart = rowOffset;\n\n    for (var x = rowOffset; x < width; x++) {\n      if (row.get(x) != isWhite) {\n        counters[counterPosition]++;\n      } else {\n        if (counterPosition == 3) {\n          if (searchingEvenPair) {\n            RSSExpandedReader.reverseCounters(counters);\n          }\n\n          if (RSSExpandedReader.isFinderPattern(counters)) {\n            this.startEnd[0] = patternStart;\n            this.startEnd[1] = x;\n            return;\n          }\n\n          if (searchingEvenPair) {\n            RSSExpandedReader.reverseCounters(counters);\n          }\n\n          patternStart += counters[0] + counters[1];\n          counters[0] = counters[2];\n          counters[1] = counters[3];\n          counters[2] = 0;\n          counters[3] = 0;\n          counterPosition--;\n        } else {\n          counterPosition++;\n        }\n\n        counters[counterPosition] = 1;\n        isWhite = !isWhite;\n      }\n    }\n\n    throw new NotFoundException_1.default();\n  };\n\n  RSSExpandedReader.reverseCounters = function (counters) {\n    var length = counters.length;\n\n    for (var i = 0; i < length / 2; ++i) {\n      var tmp = counters[i];\n      counters[i] = counters[length - i - 1];\n      counters[length - i - 1] = tmp;\n    }\n  };\n\n  RSSExpandedReader.prototype.parseFoundFinderPattern = function (row, rowNumber, oddPattern) {\n    // Actually we found elements 2-5.\n    var firstCounter;\n    var start;\n    var end;\n\n    if (oddPattern) {\n      // If pattern number is odd, we need to locate element 1 *before* the current block.\n      var firstElementStart = this.startEnd[0] - 1; // Locate element 1\n\n      while (firstElementStart >= 0 && !row.get(firstElementStart)) {\n        firstElementStart--;\n      }\n\n      firstElementStart++;\n      firstCounter = this.startEnd[0] - firstElementStart;\n      start = firstElementStart;\n      end = this.startEnd[1];\n    } else {\n      // If pattern number is even, the pattern is reversed, so we need to locate element 1 *after* the current block.\n      start = this.startEnd[0];\n      end = row.getNextUnset(this.startEnd[1] + 1);\n      firstCounter = end - this.startEnd[1];\n    } // Make 'counters' hold 1-4\n\n\n    var counters = this.getDecodeFinderCounters();\n    System_1.default.arraycopy(counters, 0, counters, 1, counters.length - 1);\n    counters[0] = firstCounter;\n    var value;\n\n    try {\n      value = this.parseFinderValue(counters, RSSExpandedReader.FINDER_PATTERNS);\n    } catch (e) {\n      return null;\n      console.log(e);\n    } //return new FinderPattern(value, new int[] { start, end }, start, end, rowNumber});\n\n\n    return new FinderPattern_1.default(value, [start, end], start, end, rowNumber);\n  };\n\n  RSSExpandedReader.prototype.decodeDataCharacter = function (row, pattern, isOddPattern, leftChar) {\n    var counters = this.getDataCharacterCounters();\n\n    for (var x = 0; x < counters.length; x++) {\n      counters[x] = 0;\n    }\n\n    if (leftChar) {\n      RSSExpandedReader.recordPatternInReverse(row, pattern.getStartEnd()[0], counters);\n    } else {\n      RSSExpandedReader.recordPattern(row, pattern.getStartEnd()[1], counters); // reverse it\n\n      for (var i = 0, j = counters.length - 1; i < j; i++, j--) {\n        var temp = counters[i];\n        counters[i] = counters[j];\n        counters[j] = temp;\n      }\n    } //counters[] has the pixels of the module\n\n\n    var numModules = 17; //left and right data characters have all the same length\n\n    var elementWidth = MathUtils_1.default.sum(new Int32Array(counters)) / numModules; // Sanity check: element width for pattern and the character should match\n\n    var expectedElementWidth = (pattern.getStartEnd()[1] - pattern.getStartEnd()[0]) / 15.0;\n\n    if (Math.abs(elementWidth - expectedElementWidth) / expectedElementWidth > 0.3) {\n      throw new NotFoundException_1.default();\n    }\n\n    var oddCounts = this.getOddCounts();\n    var evenCounts = this.getEvenCounts();\n    var oddRoundingErrors = this.getOddRoundingErrors();\n    var evenRoundingErrors = this.getEvenRoundingErrors();\n\n    for (var i = 0; i < counters.length; i++) {\n      var value_1 = 1.0 * counters[i] / elementWidth;\n      var count = value_1 + 0.5; // Round\n\n      if (count < 1) {\n        if (value_1 < 0.3) {\n          throw new NotFoundException_1.default();\n        }\n\n        count = 1;\n      } else if (count > 8) {\n        if (value_1 > 8.7) {\n          throw new NotFoundException_1.default();\n        }\n\n        count = 8;\n      }\n\n      var offset = i / 2;\n\n      if ((i & 0x01) == 0) {\n        oddCounts[offset] = count;\n        oddRoundingErrors[offset] = value_1 - count;\n      } else {\n        evenCounts[offset] = count;\n        evenRoundingErrors[offset] = value_1 - count;\n      }\n    }\n\n    this.adjustOddEvenCounts(numModules);\n    var weightRowNumber = 4 * pattern.getValue() + (isOddPattern ? 0 : 2) + (leftChar ? 0 : 1) - 1;\n    var oddSum = 0;\n    var oddChecksumPortion = 0;\n\n    for (var i = oddCounts.length - 1; i >= 0; i--) {\n      if (RSSExpandedReader.isNotA1left(pattern, isOddPattern, leftChar)) {\n        var weight = RSSExpandedReader.WEIGHTS[weightRowNumber][2 * i];\n        oddChecksumPortion += oddCounts[i] * weight;\n      }\n\n      oddSum += oddCounts[i];\n    }\n\n    var evenChecksumPortion = 0; //int evenSum = 0;\n\n    for (var i = evenCounts.length - 1; i >= 0; i--) {\n      if (RSSExpandedReader.isNotA1left(pattern, isOddPattern, leftChar)) {\n        var weight = RSSExpandedReader.WEIGHTS[weightRowNumber][2 * i + 1];\n        evenChecksumPortion += evenCounts[i] * weight;\n      } //evenSum += evenCounts[i];\n\n    }\n\n    var checksumPortion = oddChecksumPortion + evenChecksumPortion;\n\n    if ((oddSum & 0x01) != 0 || oddSum > 13 || oddSum < 4) {\n      throw new NotFoundException_1.default();\n    }\n\n    var group = (13 - oddSum) / 2;\n    var oddWidest = RSSExpandedReader.SYMBOL_WIDEST[group];\n    var evenWidest = 9 - oddWidest;\n    var vOdd = RSSUtils_1.default.getRSSvalue(oddCounts, oddWidest, true);\n    var vEven = RSSUtils_1.default.getRSSvalue(evenCounts, evenWidest, false);\n    var tEven = RSSExpandedReader.EVEN_TOTAL_SUBSET[group];\n    var gSum = RSSExpandedReader.GSUM[group];\n    var value = vOdd * tEven + vEven + gSum;\n    return new DataCharacter_1.default(value, checksumPortion);\n  };\n\n  RSSExpandedReader.isNotA1left = function (pattern, isOddPattern, leftChar) {\n    // A1: pattern.getValue is 0 (A), and it's an oddPattern, and it is a left char\n    return !(pattern.getValue() == 0 && isOddPattern && leftChar);\n  };\n\n  RSSExpandedReader.prototype.adjustOddEvenCounts = function (numModules) {\n    var oddSum = MathUtils_1.default.sum(new Int32Array(this.getOddCounts()));\n    var evenSum = MathUtils_1.default.sum(new Int32Array(this.getEvenCounts()));\n    var incrementOdd = false;\n    var decrementOdd = false;\n\n    if (oddSum > 13) {\n      decrementOdd = true;\n    } else if (oddSum < 4) {\n      incrementOdd = true;\n    }\n\n    var incrementEven = false;\n    var decrementEven = false;\n\n    if (evenSum > 13) {\n      decrementEven = true;\n    } else if (evenSum < 4) {\n      incrementEven = true;\n    }\n\n    var mismatch = oddSum + evenSum - numModules;\n    var oddParityBad = (oddSum & 0x01) == 1;\n    var evenParityBad = (evenSum & 0x01) == 0;\n\n    if (mismatch == 1) {\n      if (oddParityBad) {\n        if (evenParityBad) {\n          throw new NotFoundException_1.default();\n        }\n\n        decrementOdd = true;\n      } else {\n        if (!evenParityBad) {\n          throw new NotFoundException_1.default();\n        }\n\n        decrementEven = true;\n      }\n    } else if (mismatch == -1) {\n      if (oddParityBad) {\n        if (evenParityBad) {\n          throw new NotFoundException_1.default();\n        }\n\n        incrementOdd = true;\n      } else {\n        if (!evenParityBad) {\n          throw new NotFoundException_1.default();\n        }\n\n        incrementEven = true;\n      }\n    } else if (mismatch == 0) {\n      if (oddParityBad) {\n        if (!evenParityBad) {\n          throw new NotFoundException_1.default();\n        } // Both bad\n\n\n        if (oddSum < evenSum) {\n          incrementOdd = true;\n          decrementEven = true;\n        } else {\n          decrementOdd = true;\n          incrementEven = true;\n        }\n      } else {\n        if (evenParityBad) {\n          throw new NotFoundException_1.default();\n        } // Nothing to do!\n\n      }\n    } else {\n      throw new NotFoundException_1.default();\n    }\n\n    if (incrementOdd) {\n      if (decrementOdd) {\n        throw new NotFoundException_1.default();\n      }\n\n      RSSExpandedReader.increment(this.getOddCounts(), this.getOddRoundingErrors());\n    }\n\n    if (decrementOdd) {\n      RSSExpandedReader.decrement(this.getOddCounts(), this.getOddRoundingErrors());\n    }\n\n    if (incrementEven) {\n      if (decrementEven) {\n        throw new NotFoundException_1.default();\n      }\n\n      RSSExpandedReader.increment(this.getEvenCounts(), this.getOddRoundingErrors());\n    }\n\n    if (decrementEven) {\n      RSSExpandedReader.decrement(this.getEvenCounts(), this.getEvenRoundingErrors());\n    }\n  };\n\n  RSSExpandedReader.SYMBOL_WIDEST = [7, 5, 4, 3, 1];\n  RSSExpandedReader.EVEN_TOTAL_SUBSET = [4, 20, 52, 104, 204];\n  RSSExpandedReader.GSUM = [0, 348, 1388, 2948, 3988];\n  RSSExpandedReader.FINDER_PATTERNS = [[1, 8, 4, 1], [3, 6, 4, 1], [3, 4, 6, 1], [3, 2, 8, 1], [2, 6, 5, 1], [2, 2, 9, 1] // F\n  ];\n  RSSExpandedReader.WEIGHTS = [[1, 3, 9, 27, 81, 32, 96, 77], [20, 60, 180, 118, 143, 7, 21, 63], [189, 145, 13, 39, 117, 140, 209, 205], [193, 157, 49, 147, 19, 57, 171, 91], [62, 186, 136, 197, 169, 85, 44, 132], [185, 133, 188, 142, 4, 12, 36, 108], [113, 128, 173, 97, 80, 29, 87, 50], [150, 28, 84, 41, 123, 158, 52, 156], [46, 138, 203, 187, 139, 206, 196, 166], [76, 17, 51, 153, 37, 111, 122, 155], [43, 129, 176, 106, 107, 110, 119, 146], [16, 48, 144, 10, 30, 90, 59, 177], [109, 116, 137, 200, 178, 112, 125, 164], [70, 210, 208, 202, 184, 130, 179, 115], [134, 191, 151, 31, 93, 68, 204, 190], [148, 22, 66, 198, 172, 94, 71, 2], [6, 18, 54, 162, 64, 192, 154, 40], [120, 149, 25, 75, 14, 42, 126, 167], [79, 26, 78, 23, 69, 207, 199, 175], [103, 98, 83, 38, 114, 131, 182, 124], [161, 61, 183, 127, 170, 88, 53, 159], [55, 165, 73, 8, 24, 72, 5, 15], [45, 135, 194, 160, 58, 174, 100, 89]];\n  RSSExpandedReader.FINDER_PAT_A = 0;\n  RSSExpandedReader.FINDER_PAT_B = 1;\n  RSSExpandedReader.FINDER_PAT_C = 2;\n  RSSExpandedReader.FINDER_PAT_D = 3;\n  RSSExpandedReader.FINDER_PAT_E = 4;\n  RSSExpandedReader.FINDER_PAT_F = 5;\n  RSSExpandedReader.FINDER_PATTERN_SEQUENCES = [[RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_A], [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_B], [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_C, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_D], [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_E, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_D, RSSExpandedReader.FINDER_PAT_C], [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_E, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_D, RSSExpandedReader.FINDER_PAT_D, RSSExpandedReader.FINDER_PAT_F], [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_E, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_D, RSSExpandedReader.FINDER_PAT_E, RSSExpandedReader.FINDER_PAT_F, RSSExpandedReader.FINDER_PAT_F], [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_C, RSSExpandedReader.FINDER_PAT_C, RSSExpandedReader.FINDER_PAT_D, RSSExpandedReader.FINDER_PAT_D], [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_C, RSSExpandedReader.FINDER_PAT_C, RSSExpandedReader.FINDER_PAT_D, RSSExpandedReader.FINDER_PAT_E, RSSExpandedReader.FINDER_PAT_E], [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_C, RSSExpandedReader.FINDER_PAT_C, RSSExpandedReader.FINDER_PAT_D, RSSExpandedReader.FINDER_PAT_E, RSSExpandedReader.FINDER_PAT_F, RSSExpandedReader.FINDER_PAT_F], [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_C, RSSExpandedReader.FINDER_PAT_D, RSSExpandedReader.FINDER_PAT_D, RSSExpandedReader.FINDER_PAT_E, RSSExpandedReader.FINDER_PAT_E, RSSExpandedReader.FINDER_PAT_F, RSSExpandedReader.FINDER_PAT_F]];\n  RSSExpandedReader.MAX_PAIRS = 11;\n  return RSSExpandedReader;\n}(AbstractRSSReader_1.default);\n\nexports.default = RSSExpandedReader;","map":{"version":3,"sources":["../../../../../src/core/oned/rss/expanded/RSSExpandedReader.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (this && this.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BarcodeFormat_1 = require(\"../../../BarcodeFormat\");\nvar NotFoundException_1 = require(\"../../../NotFoundException\");\nvar Result_1 = require(\"../../../Result\");\nvar MathUtils_1 = require(\"../../../common/detector/MathUtils\");\nvar AbstractRSSReader_1 = require(\"../../rss/AbstractRSSReader\");\nvar DataCharacter_1 = require(\"../../rss/DataCharacter\");\nvar FinderPattern_1 = require(\"../../rss/FinderPattern\");\nvar RSSUtils_1 = require(\"../../rss/RSSUtils\");\nvar AbstractExpandedDecoderComplement_1 = require(\"./decoders/AbstractExpandedDecoderComplement\");\nvar ExpandedPair_1 = require(\"./ExpandedPair\");\nvar ExpandedRow_1 = require(\"./ExpandedRow\");\nvar BitArrayBuilder_1 = require(\"./BitArrayBuilder\");\nvar System_1 = require(\"../../../util/System\");\n// import java.util.ArrayList;\n// import java.util.Iterator;\n// import java.util.List;\n// import java.util.Map;\n// import java.util.Collections;\nvar RSSExpandedReader = /** @class */ (function (_super) {\n    __extends(RSSExpandedReader, _super);\n    function RSSExpandedReader() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.pairs = new Array(RSSExpandedReader.MAX_PAIRS);\n        _this.rows = new Array();\n        _this.startEnd = [2];\n        return _this;\n    }\n    RSSExpandedReader.prototype.decodeRow = function (rowNumber, row, hints) {\n        // Rows can start with even pattern in case in prev rows there where odd number of patters.\n        // So lets try twice\n        //this.pairs.clear();\n        this.pairs.length = 0;\n        this.startFromEven = false;\n        try {\n            return RSSExpandedReader.constructResult(this.decodeRow2pairs(rowNumber, row));\n        }\n        catch (e) {\n            // OK\n            console.log(e);\n        }\n        this.pairs.length = 0;\n        this.startFromEven = true;\n        return RSSExpandedReader.constructResult(this.decodeRow2pairs(rowNumber, row));\n    };\n    RSSExpandedReader.prototype.reset = function () {\n        this.pairs.length = 0;\n        this.rows.length = 0;\n    };\n    // Not private for testing\n    RSSExpandedReader.prototype.decodeRow2pairs = function (rowNumber, row) {\n        var done = false;\n        while (!done) {\n            try {\n                this.pairs.push(this.retrieveNextPair(row, this.pairs, rowNumber));\n            }\n            catch (NotFoundException) {\n                if (!this.pairs.length) {\n                    throw new NotFoundException();\n                }\n                // exit this loop when retrieveNextPair() fails and throws\n                done = true;\n            }\n        }\n        // TODO: verify sequence of finder patterns as in checkPairSequence()\n        if (this.checkChecksum()) {\n            return this.pairs;\n        }\n        var tryStackedDecode;\n        if (this.rows.length) {\n            tryStackedDecode = true;\n        }\n        else {\n            tryStackedDecode = false;\n        }\n        //let tryStackedDecode = !this.rows.isEmpty();\n        this.storeRow(rowNumber, false); // TODO: deal with reversed rows\n        if (tryStackedDecode) {\n            // When the image is 180-rotated, then rows are sorted in wrong direction.\n            // Try twice with both the directions.\n            var ps = this.checkRowsBoolean(false);\n            if (ps != null) {\n                return ps;\n            }\n            ps = this.checkRowsBoolean(true);\n            if (ps != null) {\n                return ps;\n            }\n        }\n        throw new NotFoundException_1.default();\n    };\n    //Need to Verify\n    RSSExpandedReader.prototype.checkRowsBoolean = function (reverse) {\n        // Limit number of rows we are checking\n        // We use recursive algorithm with pure complexity and don't want it to take forever\n        // Stacked barcode can have up to 11 rows, so 25 seems reasonable enough\n        if (this.rows.length > 25) {\n            this.rows.length = 0; // We will never have a chance to get result, so clear it\n            return null;\n        }\n        this.pairs.length = 0;\n        if (reverse) {\n            this.rows = this.rows.reverse();\n            //Collections.reverse(this.rows);\n        }\n        var ps = null;\n        try {\n            ps = this.checkRows(new Array(), 0);\n        }\n        catch (e) {\n            // OK\n            console.log(e);\n        }\n        if (reverse) {\n            this.rows = this.rows.reverse();\n            //Collections.reverse(this.rows);\n        }\n        return ps;\n    };\n    // Try to construct a valid rows sequence\n    // Recursion is used to implement backtracking\n    RSSExpandedReader.prototype.checkRows = function (collectedRows, currentRow) {\n        var e_1, _a;\n        for (var i = currentRow; i < this.rows.length; i++) {\n            var row = this.rows[i];\n            this.pairs.length = 0;\n            try {\n                for (var collectedRows_1 = __values(collectedRows), collectedRows_1_1 = collectedRows_1.next(); !collectedRows_1_1.done; collectedRows_1_1 = collectedRows_1.next()) {\n                    var collectedRow = collectedRows_1_1.value;\n                    this.pairs.push(collectedRow.getPairs());\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (collectedRows_1_1 && !collectedRows_1_1.done && (_a = collectedRows_1.return)) _a.call(collectedRows_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            this.pairs.push(row.getPairs());\n            if (!RSSExpandedReader.isValidSequence(this.pairs)) {\n                continue;\n            }\n            if (this.checkChecksum()) {\n                return this.pairs;\n            }\n            var rs = new Array(collectedRows);\n            rs.push(row);\n            try {\n                // Recursion: try to add more rows\n                return this.checkRows(rs, i + 1);\n            }\n            catch (e) {\n                // We failed, try the next candidate\n                console.log(e);\n            }\n        }\n        throw new NotFoundException_1.default();\n    };\n    // Whether the pairs form a valid find pattern sequence,\n    // either complete or a prefix\n    RSSExpandedReader.isValidSequence = function (pairs) {\n        var e_2, _a;\n        try {\n            for (var _b = __values(RSSExpandedReader.FINDER_PATTERN_SEQUENCES), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var sequence = _c.value;\n                if (pairs.length > sequence.length) {\n                    continue;\n                }\n                var stop_1 = true;\n                for (var j = 0; j < pairs.length; j++) {\n                    if (pairs[j].getFinderPattern().getValue() != sequence[j]) {\n                        stop_1 = false;\n                        break;\n                    }\n                }\n                if (stop_1) {\n                    return true;\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        return false;\n    };\n    RSSExpandedReader.prototype.storeRow = function (rowNumber, wasReversed) {\n        // Discard if duplicate above or below; otherwise insert in order by row number.\n        var insertPos = 0;\n        var prevIsSame = false;\n        var nextIsSame = false;\n        while (insertPos < this.rows.length) {\n            var erow = this.rows[insertPos];\n            if (erow.getRowNumber() > rowNumber) {\n                nextIsSame = erow.isEquivalent(this.pairs);\n                break;\n            }\n            prevIsSame = erow.isEquivalent(this.pairs);\n            insertPos++;\n        }\n        if (nextIsSame || prevIsSame) {\n            return;\n        }\n        // When the row was partially decoded (e.g. 2 pairs found instead of 3),\n        // it will prevent us from detecting the barcode.\n        // Try to merge partial rows\n        // Check whether the row is part of an allready detected row\n        if (RSSExpandedReader.isPartialRow(this.pairs, this.rows)) {\n            return;\n        }\n        this.rows.push(insertPos, new ExpandedRow_1.default(this.pairs, rowNumber, wasReversed));\n        this.removePartialRows(this.pairs, this.rows);\n    };\n    // Remove all the rows that contains only specified pairs\n    RSSExpandedReader.prototype.removePartialRows = function (pairs, rows) {\n        var e_3, _a, e_4, _b, e_5, _c;\n        try {\n            // for (Iterator<ExpandedRow> iterator = rows.iterator(); iterator.hasNext();) {\n            //   ExpandedRow r = iterator.next();\n            //   if (r.getPairs().size() == pairs.size()) {\n            //     continue;\n            //   }\n            //   boolean allFound = true;\n            //   for (ExpandedPair p : r.getPairs()) {\n            //     boolean found = false;\n            //     for (ExpandedPair pp : pairs) {\n            //       if (p.equals(pp)) {\n            //         found = true;\n            //         break;\n            //       }\n            //     }\n            //     if (!found) {\n            //       allFound = false;\n            //       break;\n            //     }\n            //   }\n            //   if (allFound) {\n            //     // 'pairs' contains all the pairs from the row 'r'\n            //     iterator.remove();\n            //   }\n            // }\n            for (var rows_1 = __values(rows), rows_1_1 = rows_1.next(); !rows_1_1.done; rows_1_1 = rows_1.next()) {\n                var row = rows_1_1.value;\n                if (row.getPairs().length === pairs.length) {\n                    continue;\n                }\n                var allFound = true;\n                try {\n                    for (var _d = __values(row.getPairs()), _e = _d.next(); !_e.done; _e = _d.next()) {\n                        var p = _e.value;\n                        var found = false;\n                        try {\n                            for (var pairs_1 = __values(pairs), pairs_1_1 = pairs_1.next(); !pairs_1_1.done; pairs_1_1 = pairs_1.next()) {\n                                var pp = pairs_1_1.value;\n                                if (ExpandedPair_1.default.equals(p, pp)) {\n                                    found = true;\n                                    break;\n                                }\n                            }\n                        }\n                        catch (e_5_1) { e_5 = { error: e_5_1 }; }\n                        finally {\n                            try {\n                                if (pairs_1_1 && !pairs_1_1.done && (_c = pairs_1.return)) _c.call(pairs_1);\n                            }\n                            finally { if (e_5) throw e_5.error; }\n                        }\n                        if (!found) {\n                            allFound = false;\n                        }\n                    }\n                }\n                catch (e_4_1) { e_4 = { error: e_4_1 }; }\n                finally {\n                    try {\n                        if (_e && !_e.done && (_b = _d.return)) _b.call(_d);\n                    }\n                    finally { if (e_4) throw e_4.error; }\n                }\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (rows_1_1 && !rows_1_1.done && (_a = rows_1.return)) _a.call(rows_1);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n    };\n    // Returns true when one of the rows already contains all the pairs\n    RSSExpandedReader.isPartialRow = function (pairs, rows) {\n        var e_6, _a, e_7, _b, e_8, _c;\n        try {\n            for (var rows_2 = __values(rows), rows_2_1 = rows_2.next(); !rows_2_1.done; rows_2_1 = rows_2.next()) {\n                var r = rows_2_1.value;\n                var allFound = true;\n                try {\n                    for (var pairs_2 = __values(pairs), pairs_2_1 = pairs_2.next(); !pairs_2_1.done; pairs_2_1 = pairs_2.next()) {\n                        var p = pairs_2_1.value;\n                        var found = false;\n                        try {\n                            for (var _d = __values(r.getPairs()), _e = _d.next(); !_e.done; _e = _d.next()) {\n                                var pp = _e.value;\n                                if (p.equals(pp)) {\n                                    found = true;\n                                    break;\n                                }\n                            }\n                        }\n                        catch (e_8_1) { e_8 = { error: e_8_1 }; }\n                        finally {\n                            try {\n                                if (_e && !_e.done && (_c = _d.return)) _c.call(_d);\n                            }\n                            finally { if (e_8) throw e_8.error; }\n                        }\n                        if (!found) {\n                            allFound = false;\n                            break;\n                        }\n                    }\n                }\n                catch (e_7_1) { e_7 = { error: e_7_1 }; }\n                finally {\n                    try {\n                        if (pairs_2_1 && !pairs_2_1.done && (_b = pairs_2.return)) _b.call(pairs_2);\n                    }\n                    finally { if (e_7) throw e_7.error; }\n                }\n                if (allFound) {\n                    // the row 'r' contain all the pairs from 'pairs'\n                    return true;\n                }\n            }\n        }\n        catch (e_6_1) { e_6 = { error: e_6_1 }; }\n        finally {\n            try {\n                if (rows_2_1 && !rows_2_1.done && (_a = rows_2.return)) _a.call(rows_2);\n            }\n            finally { if (e_6) throw e_6.error; }\n        }\n        return false;\n    };\n    // Only used for unit testing\n    RSSExpandedReader.prototype.getRows = function () {\n        return this.rows;\n    };\n    // Not private for unit testing\n    RSSExpandedReader.constructResult = function (pairs) {\n        var binary = BitArrayBuilder_1.default.buildBitArray(pairs);\n        var decoder = AbstractExpandedDecoderComplement_1.createDecoder(binary);\n        var resultingString = decoder.parseInformation();\n        var firstPoints = pairs[0].getFinderPattern().getResultPoints();\n        var lastPoints = pairs[pairs.length - 1].getFinderPattern().getResultPoints();\n        var points = [firstPoints[0], firstPoints[1], lastPoints[0], lastPoints[1]];\n        return new Result_1.default(resultingString, null, null, points, BarcodeFormat_1.default.RSS_EXPANDED, null);\n    };\n    RSSExpandedReader.prototype.checkChecksum = function () {\n        var firstPair = this.pairs.get(0);\n        var checkCharacter = firstPair.getLeftChar();\n        var firstCharacter = firstPair.getRightChar();\n        if (firstCharacter == null) {\n            return false;\n        }\n        var checksum = firstCharacter.getChecksumPortion();\n        var s = 2;\n        for (var i = 1; i < this.pairs.size(); ++i) {\n            var currentPair = this.pairs.get(i);\n            checksum += currentPair.getLeftChar().getChecksumPortion();\n            s++;\n            var currentRightChar = currentPair.getRightChar();\n            if (currentRightChar != null) {\n                checksum += currentRightChar.getChecksumPortion();\n                s++;\n            }\n        }\n        checksum %= 211;\n        var checkCharacterValue = 211 * (s - 4) + checksum;\n        return checkCharacterValue == checkCharacter.getValue();\n    };\n    RSSExpandedReader.getNextSecondBar = function (row, initialPos) {\n        var currentPos;\n        if (row.get(initialPos)) {\n            currentPos = row.getNextUnset(initialPos);\n            currentPos = row.getNextSet(currentPos);\n        }\n        else {\n            currentPos = row.getNextSet(initialPos);\n            currentPos = row.getNextUnset(currentPos);\n        }\n        return currentPos;\n    };\n    // not private for testing\n    RSSExpandedReader.prototype.retrieveNextPair = function (row, previousPairs, rowNumber) {\n        var isOddPattern = previousPairs.length % 2 == 0;\n        if (this.startFromEven) {\n            isOddPattern = !isOddPattern;\n        }\n        var pattern;\n        var keepFinding = true;\n        var forcedOffset = -1;\n        do {\n            this.findNextPair(row, previousPairs, forcedOffset);\n            pattern = this.parseFoundFinderPattern(row, rowNumber, isOddPattern);\n            if (pattern == null) {\n                forcedOffset = RSSExpandedReader.getNextSecondBar(row, this.startEnd[0]);\n            }\n            else {\n                keepFinding = false;\n            }\n        } while (keepFinding);\n        // When stacked symbol is split over multiple rows, there's no way to guess if this pair can be last or not.\n        // boolean mayBeLast = checkPairSequence(previousPairs, pattern);\n        var leftChar = this.decodeDataCharacter(row, pattern, isOddPattern, true);\n        if (!this.isEmptyPair(previousPairs) && previousPairs[previousPairs.length - 1].mustBeLast()) {\n            throw new NotFoundException_1.default();\n        }\n        var rightChar;\n        try {\n            rightChar = this.decodeDataCharacter(row, pattern, isOddPattern, false);\n        }\n        catch (e) {\n            rightChar = null;\n            console.log(e);\n        }\n        return new ExpandedPair_1.default(leftChar, rightChar, pattern, true);\n    };\n    RSSExpandedReader.prototype.isEmptyPair = function (pairs) {\n        if (pairs.length === 0) {\n            return true;\n        }\n        return false;\n    };\n    RSSExpandedReader.prototype.findNextPair = function (row, previousPairs, forcedOffset) {\n        var counters = this.getDecodeFinderCounters();\n        counters[0] = 0;\n        counters[1] = 0;\n        counters[2] = 0;\n        counters[3] = 0;\n        var width = row.getSize();\n        var rowOffset;\n        if (forcedOffset >= 0) {\n            rowOffset = forcedOffset;\n        }\n        else if (this.isEmptyPair(previousPairs)) {\n            rowOffset = 0;\n        }\n        else {\n            var lastPair = previousPairs[previousPairs.length - 1];\n            rowOffset = lastPair.getFinderPattern().getStartEnd()[1];\n        }\n        var searchingEvenPair = previousPairs.length % 2 != 0;\n        if (this.startFromEven) {\n            searchingEvenPair = !searchingEvenPair;\n        }\n        var isWhite = false;\n        while (rowOffset < width) {\n            isWhite = !row.get(rowOffset);\n            if (!isWhite) {\n                break;\n            }\n            rowOffset++;\n        }\n        var counterPosition = 0;\n        var patternStart = rowOffset;\n        for (var x = rowOffset; x < width; x++) {\n            if (row.get(x) != isWhite) {\n                counters[counterPosition]++;\n            }\n            else {\n                if (counterPosition == 3) {\n                    if (searchingEvenPair) {\n                        RSSExpandedReader.reverseCounters(counters);\n                    }\n                    if (RSSExpandedReader.isFinderPattern(counters)) {\n                        this.startEnd[0] = patternStart;\n                        this.startEnd[1] = x;\n                        return;\n                    }\n                    if (searchingEvenPair) {\n                        RSSExpandedReader.reverseCounters(counters);\n                    }\n                    patternStart += counters[0] + counters[1];\n                    counters[0] = counters[2];\n                    counters[1] = counters[3];\n                    counters[2] = 0;\n                    counters[3] = 0;\n                    counterPosition--;\n                }\n                else {\n                    counterPosition++;\n                }\n                counters[counterPosition] = 1;\n                isWhite = !isWhite;\n            }\n        }\n        throw new NotFoundException_1.default();\n    };\n    RSSExpandedReader.reverseCounters = function (counters) {\n        var length = counters.length;\n        for (var i = 0; i < length / 2; ++i) {\n            var tmp = counters[i];\n            counters[i] = counters[length - i - 1];\n            counters[length - i - 1] = tmp;\n        }\n    };\n    RSSExpandedReader.prototype.parseFoundFinderPattern = function (row, rowNumber, oddPattern) {\n        // Actually we found elements 2-5.\n        var firstCounter;\n        var start;\n        var end;\n        if (oddPattern) {\n            // If pattern number is odd, we need to locate element 1 *before* the current block.\n            var firstElementStart = this.startEnd[0] - 1;\n            // Locate element 1\n            while (firstElementStart >= 0 && !row.get(firstElementStart)) {\n                firstElementStart--;\n            }\n            firstElementStart++;\n            firstCounter = this.startEnd[0] - firstElementStart;\n            start = firstElementStart;\n            end = this.startEnd[1];\n        }\n        else {\n            // If pattern number is even, the pattern is reversed, so we need to locate element 1 *after* the current block.\n            start = this.startEnd[0];\n            end = row.getNextUnset(this.startEnd[1] + 1);\n            firstCounter = end - this.startEnd[1];\n        }\n        // Make 'counters' hold 1-4\n        var counters = this.getDecodeFinderCounters();\n        System_1.default.arraycopy(counters, 0, counters, 1, counters.length - 1);\n        counters[0] = firstCounter;\n        var value;\n        try {\n            value = this.parseFinderValue(counters, RSSExpandedReader.FINDER_PATTERNS);\n        }\n        catch (e) {\n            return null;\n            console.log(e);\n        }\n        //return new FinderPattern(value, new int[] { start, end }, start, end, rowNumber});\n        return new FinderPattern_1.default(value, [start, end], start, end, rowNumber);\n    };\n    RSSExpandedReader.prototype.decodeDataCharacter = function (row, pattern, isOddPattern, leftChar) {\n        var counters = this.getDataCharacterCounters();\n        for (var x = 0; x < counters.length; x++) {\n            counters[x] = 0;\n        }\n        if (leftChar) {\n            RSSExpandedReader.recordPatternInReverse(row, pattern.getStartEnd()[0], counters);\n        }\n        else {\n            RSSExpandedReader.recordPattern(row, pattern.getStartEnd()[1], counters);\n            // reverse it\n            for (var i = 0, j = counters.length - 1; i < j; i++, j--) {\n                var temp = counters[i];\n                counters[i] = counters[j];\n                counters[j] = temp;\n            }\n        } //counters[] has the pixels of the module\n        var numModules = 17; //left and right data characters have all the same length\n        var elementWidth = MathUtils_1.default.sum(new Int32Array(counters)) / numModules;\n        // Sanity check: element width for pattern and the character should match\n        var expectedElementWidth = (pattern.getStartEnd()[1] - pattern.getStartEnd()[0]) / 15.0;\n        if (Math.abs(elementWidth - expectedElementWidth) / expectedElementWidth > 0.3) {\n            throw new NotFoundException_1.default();\n        }\n        var oddCounts = this.getOddCounts();\n        var evenCounts = this.getEvenCounts();\n        var oddRoundingErrors = this.getOddRoundingErrors();\n        var evenRoundingErrors = this.getEvenRoundingErrors();\n        for (var i = 0; i < counters.length; i++) {\n            var value_1 = 1.0 * counters[i] / elementWidth;\n            var count = value_1 + 0.5; // Round\n            if (count < 1) {\n                if (value_1 < 0.3) {\n                    throw new NotFoundException_1.default();\n                }\n                count = 1;\n            }\n            else if (count > 8) {\n                if (value_1 > 8.7) {\n                    throw new NotFoundException_1.default();\n                }\n                count = 8;\n            }\n            var offset = i / 2;\n            if ((i & 0x01) == 0) {\n                oddCounts[offset] = count;\n                oddRoundingErrors[offset] = value_1 - count;\n            }\n            else {\n                evenCounts[offset] = count;\n                evenRoundingErrors[offset] = value_1 - count;\n            }\n        }\n        this.adjustOddEvenCounts(numModules);\n        var weightRowNumber = 4 * pattern.getValue() + (isOddPattern ? 0 : 2) + (leftChar ? 0 : 1) - 1;\n        var oddSum = 0;\n        var oddChecksumPortion = 0;\n        for (var i = oddCounts.length - 1; i >= 0; i--) {\n            if (RSSExpandedReader.isNotA1left(pattern, isOddPattern, leftChar)) {\n                var weight = RSSExpandedReader.WEIGHTS[weightRowNumber][2 * i];\n                oddChecksumPortion += oddCounts[i] * weight;\n            }\n            oddSum += oddCounts[i];\n        }\n        var evenChecksumPortion = 0;\n        //int evenSum = 0;\n        for (var i = evenCounts.length - 1; i >= 0; i--) {\n            if (RSSExpandedReader.isNotA1left(pattern, isOddPattern, leftChar)) {\n                var weight = RSSExpandedReader.WEIGHTS[weightRowNumber][2 * i + 1];\n                evenChecksumPortion += evenCounts[i] * weight;\n            }\n            //evenSum += evenCounts[i];\n        }\n        var checksumPortion = oddChecksumPortion + evenChecksumPortion;\n        if ((oddSum & 0x01) != 0 || oddSum > 13 || oddSum < 4) {\n            throw new NotFoundException_1.default();\n        }\n        var group = (13 - oddSum) / 2;\n        var oddWidest = RSSExpandedReader.SYMBOL_WIDEST[group];\n        var evenWidest = 9 - oddWidest;\n        var vOdd = RSSUtils_1.default.getRSSvalue(oddCounts, oddWidest, true);\n        var vEven = RSSUtils_1.default.getRSSvalue(evenCounts, evenWidest, false);\n        var tEven = RSSExpandedReader.EVEN_TOTAL_SUBSET[group];\n        var gSum = RSSExpandedReader.GSUM[group];\n        var value = vOdd * tEven + vEven + gSum;\n        return new DataCharacter_1.default(value, checksumPortion);\n    };\n    RSSExpandedReader.isNotA1left = function (pattern, isOddPattern, leftChar) {\n        // A1: pattern.getValue is 0 (A), and it's an oddPattern, and it is a left char\n        return !(pattern.getValue() == 0 && isOddPattern && leftChar);\n    };\n    RSSExpandedReader.prototype.adjustOddEvenCounts = function (numModules) {\n        var oddSum = MathUtils_1.default.sum(new Int32Array(this.getOddCounts()));\n        var evenSum = MathUtils_1.default.sum(new Int32Array(this.getEvenCounts()));\n        var incrementOdd = false;\n        var decrementOdd = false;\n        if (oddSum > 13) {\n            decrementOdd = true;\n        }\n        else if (oddSum < 4) {\n            incrementOdd = true;\n        }\n        var incrementEven = false;\n        var decrementEven = false;\n        if (evenSum > 13) {\n            decrementEven = true;\n        }\n        else if (evenSum < 4) {\n            incrementEven = true;\n        }\n        var mismatch = oddSum + evenSum - numModules;\n        var oddParityBad = (oddSum & 0x01) == 1;\n        var evenParityBad = (evenSum & 0x01) == 0;\n        if (mismatch == 1) {\n            if (oddParityBad) {\n                if (evenParityBad) {\n                    throw new NotFoundException_1.default();\n                }\n                decrementOdd = true;\n            }\n            else {\n                if (!evenParityBad) {\n                    throw new NotFoundException_1.default();\n                }\n                decrementEven = true;\n            }\n        }\n        else if (mismatch == -1) {\n            if (oddParityBad) {\n                if (evenParityBad) {\n                    throw new NotFoundException_1.default();\n                }\n                incrementOdd = true;\n            }\n            else {\n                if (!evenParityBad) {\n                    throw new NotFoundException_1.default();\n                }\n                incrementEven = true;\n            }\n        }\n        else if (mismatch == 0) {\n            if (oddParityBad) {\n                if (!evenParityBad) {\n                    throw new NotFoundException_1.default();\n                }\n                // Both bad\n                if (oddSum < evenSum) {\n                    incrementOdd = true;\n                    decrementEven = true;\n                }\n                else {\n                    decrementOdd = true;\n                    incrementEven = true;\n                }\n            }\n            else {\n                if (evenParityBad) {\n                    throw new NotFoundException_1.default();\n                }\n                // Nothing to do!\n            }\n        }\n        else {\n            throw new NotFoundException_1.default();\n        }\n        if (incrementOdd) {\n            if (decrementOdd) {\n                throw new NotFoundException_1.default();\n            }\n            RSSExpandedReader.increment(this.getOddCounts(), this.getOddRoundingErrors());\n        }\n        if (decrementOdd) {\n            RSSExpandedReader.decrement(this.getOddCounts(), this.getOddRoundingErrors());\n        }\n        if (incrementEven) {\n            if (decrementEven) {\n                throw new NotFoundException_1.default();\n            }\n            RSSExpandedReader.increment(this.getEvenCounts(), this.getOddRoundingErrors());\n        }\n        if (decrementEven) {\n            RSSExpandedReader.decrement(this.getEvenCounts(), this.getEvenRoundingErrors());\n        }\n    };\n    RSSExpandedReader.SYMBOL_WIDEST = [7, 5, 4, 3, 1];\n    RSSExpandedReader.EVEN_TOTAL_SUBSET = [4, 20, 52, 104, 204];\n    RSSExpandedReader.GSUM = [0, 348, 1388, 2948, 3988];\n    RSSExpandedReader.FINDER_PATTERNS = [\n        [1, 8, 4, 1],\n        [3, 6, 4, 1],\n        [3, 4, 6, 1],\n        [3, 2, 8, 1],\n        [2, 6, 5, 1],\n        [2, 2, 9, 1] // F\n    ];\n    RSSExpandedReader.WEIGHTS = [\n        [1, 3, 9, 27, 81, 32, 96, 77],\n        [20, 60, 180, 118, 143, 7, 21, 63],\n        [189, 145, 13, 39, 117, 140, 209, 205],\n        [193, 157, 49, 147, 19, 57, 171, 91],\n        [62, 186, 136, 197, 169, 85, 44, 132],\n        [185, 133, 188, 142, 4, 12, 36, 108],\n        [113, 128, 173, 97, 80, 29, 87, 50],\n        [150, 28, 84, 41, 123, 158, 52, 156],\n        [46, 138, 203, 187, 139, 206, 196, 166],\n        [76, 17, 51, 153, 37, 111, 122, 155],\n        [43, 129, 176, 106, 107, 110, 119, 146],\n        [16, 48, 144, 10, 30, 90, 59, 177],\n        [109, 116, 137, 200, 178, 112, 125, 164],\n        [70, 210, 208, 202, 184, 130, 179, 115],\n        [134, 191, 151, 31, 93, 68, 204, 190],\n        [148, 22, 66, 198, 172, 94, 71, 2],\n        [6, 18, 54, 162, 64, 192, 154, 40],\n        [120, 149, 25, 75, 14, 42, 126, 167],\n        [79, 26, 78, 23, 69, 207, 199, 175],\n        [103, 98, 83, 38, 114, 131, 182, 124],\n        [161, 61, 183, 127, 170, 88, 53, 159],\n        [55, 165, 73, 8, 24, 72, 5, 15],\n        [45, 135, 194, 160, 58, 174, 100, 89]\n    ];\n    RSSExpandedReader.FINDER_PAT_A = 0;\n    RSSExpandedReader.FINDER_PAT_B = 1;\n    RSSExpandedReader.FINDER_PAT_C = 2;\n    RSSExpandedReader.FINDER_PAT_D = 3;\n    RSSExpandedReader.FINDER_PAT_E = 4;\n    RSSExpandedReader.FINDER_PAT_F = 5;\n    RSSExpandedReader.FINDER_PATTERN_SEQUENCES = [\n        [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_A],\n        [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_B],\n        [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_C, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_D],\n        [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_E, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_D, RSSExpandedReader.FINDER_PAT_C],\n        [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_E, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_D, RSSExpandedReader.FINDER_PAT_D, RSSExpandedReader.FINDER_PAT_F],\n        [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_E, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_D, RSSExpandedReader.FINDER_PAT_E, RSSExpandedReader.FINDER_PAT_F, RSSExpandedReader.FINDER_PAT_F],\n        [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_C, RSSExpandedReader.FINDER_PAT_C, RSSExpandedReader.FINDER_PAT_D, RSSExpandedReader.FINDER_PAT_D],\n        [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_C, RSSExpandedReader.FINDER_PAT_C, RSSExpandedReader.FINDER_PAT_D, RSSExpandedReader.FINDER_PAT_E, RSSExpandedReader.FINDER_PAT_E],\n        [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_C, RSSExpandedReader.FINDER_PAT_C, RSSExpandedReader.FINDER_PAT_D, RSSExpandedReader.FINDER_PAT_E, RSSExpandedReader.FINDER_PAT_F, RSSExpandedReader.FINDER_PAT_F],\n        [RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_A, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_B, RSSExpandedReader.FINDER_PAT_C, RSSExpandedReader.FINDER_PAT_D, RSSExpandedReader.FINDER_PAT_D, RSSExpandedReader.FINDER_PAT_E, RSSExpandedReader.FINDER_PAT_E, RSSExpandedReader.FINDER_PAT_F, RSSExpandedReader.FINDER_PAT_F],\n    ];\n    RSSExpandedReader.MAX_PAIRS = 11;\n    return RSSExpandedReader;\n}(AbstractRSSReader_1.default));\nexports.default = RSSExpandedReader;\n//# sourceMappingURL=RSSExpandedReader.js.map"]},"metadata":{},"sourceType":"script"}