{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { initializeApp } from 'firebase/app';\nimport { getDatabase, onValue } from 'firebase/database';\nimport { useEffect } from 'react';\nimport { withSuspense } from './with-suspense.js';\nimport { getAuth } from 'firebase/auth';\nconst firebaseConfig = {\n  apiKey: `${process.env.REACT_APP_API_KEY}`,\n  authDomain: `${process.env.REACT_APP_AUTH_DOMAIN}`,\n  databaseURL: `${process.env.REACT_APP_DATABASE_URL}`,\n  projectId: `${process.env.REACT_APP_PROJECTID}`,\n  storageBucket: `${process.env.REACT_APP_STORAGEBUCKET}`,\n  messagingSenderId: `${process.env.REACT_APP_MESSAGINGSENDERID}`,\n  appId: `${process.env.REACT_APP_APPID}`,\n  measurementId: `${process.env.REACT_APP_MEASUREMENTID}`\n}; // Initialize Firebase\n\nexport const app = initializeApp(firebaseConfig);\nexport const database = getDatabase();\nexport const auth = getAuth();\n/** @param {import(\"firebase/database\").Query} query */\n\nexport let reference_or_query_to_string = query => {\n  var _query$_queryIdentifi;\n\n  // @ts-ignore\n  let query_identifier = (_query$_queryIdentifi = query === null || query === void 0 ? void 0 : query._queryIdentifier) !== null && _query$_queryIdentifi !== void 0 ? _query$_queryIdentifi : '';\n  let result = query.toString() + '?q=' + query_identifier;\n  return result;\n};\nlet useFirebaseFirstValue = withSuspense((\n/** @type {import(\"firebase/database\").Query} */\npath) => {\n  return reference_or_query_to_string(path);\n}, (\n/** @type {import(\"firebase/database\").Query} */\npath) => {\n  // return get(path).then((x) => x.val());\n  return new Promise(yell => {\n    let unsub = () => {};\n\n    unsub = onValue(path, snapshot => {\n      unsub();\n      yell(snapshot.val());\n    });\n  });\n});\nexport let useFirebase = (\n/** @type {import(\"firebase/database\").Query} */\npath) => {\n  _s();\n\n  let value = useFirebaseFirstValue(path); // let [value, set_value] = React.useState(initial_value);\n\n  useEffect(() => {\n    let dispose = onValue(path, snapshot => {\n      useFirebaseFirstValue.refetch(path, snapshot.val()); // set_value(snapshot.val());\n    });\n    return () => dispose(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [reference_or_query_to_string(path)]);\n  return value;\n};\n\n_s(useFirebase, \"VjL8c9s9eu0+zBqDAec3IItpCkg=\", false, function () {\n  return [useFirebaseFirstValue];\n});","map":{"version":3,"names":["initializeApp","getDatabase","onValue","useEffect","withSuspense","getAuth","firebaseConfig","apiKey","process","env","REACT_APP_API_KEY","authDomain","REACT_APP_AUTH_DOMAIN","databaseURL","REACT_APP_DATABASE_URL","projectId","REACT_APP_PROJECTID","storageBucket","REACT_APP_STORAGEBUCKET","messagingSenderId","REACT_APP_MESSAGINGSENDERID","appId","REACT_APP_APPID","measurementId","REACT_APP_MEASUREMENTID","app","database","auth","reference_or_query_to_string","query","query_identifier","_queryIdentifier","result","toString","useFirebaseFirstValue","path","Promise","yell","unsub","snapshot","val","useFirebase","value","dispose","refetch"],"sources":["/Users/stichtinghelden/Documents/GitHub/de_verdwenen_ceo/src/utils/firebase.js"],"sourcesContent":["import { initializeApp } from 'firebase/app';\nimport { getDatabase, onValue } from 'firebase/database';\nimport { useEffect } from 'react';\nimport { withSuspense } from './with-suspense.js';\nimport { getAuth } from 'firebase/auth';\n\nconst firebaseConfig = {\n  apiKey: `${process.env.REACT_APP_API_KEY}`,\n  authDomain: `${process.env.REACT_APP_AUTH_DOMAIN}`,\n  databaseURL: `${process.env.REACT_APP_DATABASE_URL}`,\n  projectId: `${process.env.REACT_APP_PROJECTID}`,\n  storageBucket: `${process.env.REACT_APP_STORAGEBUCKET}`,\n  messagingSenderId: `${process.env.REACT_APP_MESSAGINGSENDERID}`,\n  appId: `${process.env.REACT_APP_APPID}`,\n  measurementId: `${process.env.REACT_APP_MEASUREMENTID}`,\n};\n\n// Initialize Firebase\nexport const app = initializeApp(firebaseConfig);\nexport const database = getDatabase();\nexport const auth = getAuth();\n\n/** @param {import(\"firebase/database\").Query} query */\nexport let reference_or_query_to_string = (query) => {\n  // @ts-ignore\n  let query_identifier = query?._queryIdentifier ?? '';\n  let result = query.toString() + '?q=' + query_identifier;\n  return result;\n};\n\nlet useFirebaseFirstValue = withSuspense(\n  (/** @type {import(\"firebase/database\").Query} */ path) => {\n    return reference_or_query_to_string(path);\n  },\n  (/** @type {import(\"firebase/database\").Query} */ path) => {\n    // return get(path).then((x) => x.val());\n    return new Promise((yell) => {\n      let unsub = () => {};\n      unsub = onValue(path, (snapshot) => {\n        unsub();\n        yell(snapshot.val());\n      });\n    });\n  }\n);\n\nexport let useFirebase = (\n  /** @type {import(\"firebase/database\").Query} */ path\n) => {\n  let value = useFirebaseFirstValue(path);\n\n  // let [value, set_value] = React.useState(initial_value);\n  useEffect(() => {\n    let dispose = onValue(path, (snapshot) => {\n      useFirebaseFirstValue.refetch(path, snapshot.val());\n      // set_value(snapshot.val());\n    });\n\n    return () => dispose();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [reference_or_query_to_string(path)]);\n\n  return value;\n};\n"],"mappings":";;AAAA,SAASA,aAAT,QAA8B,cAA9B;AACA,SAASC,WAAT,EAAsBC,OAAtB,QAAqC,mBAArC;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,SAASC,YAAT,QAA6B,oBAA7B;AACA,SAASC,OAAT,QAAwB,eAAxB;AAEA,MAAMC,cAAc,GAAG;EACrBC,MAAM,EAAG,GAAEC,OAAO,CAACC,GAAR,CAAYC,iBAAkB,EADpB;EAErBC,UAAU,EAAG,GAAEH,OAAO,CAACC,GAAR,CAAYG,qBAAsB,EAF5B;EAGrBC,WAAW,EAAG,GAAEL,OAAO,CAACC,GAAR,CAAYK,sBAAuB,EAH9B;EAIrBC,SAAS,EAAG,GAAEP,OAAO,CAACC,GAAR,CAAYO,mBAAoB,EAJzB;EAKrBC,aAAa,EAAG,GAAET,OAAO,CAACC,GAAR,CAAYS,uBAAwB,EALjC;EAMrBC,iBAAiB,EAAG,GAAEX,OAAO,CAACC,GAAR,CAAYW,2BAA4B,EANzC;EAOrBC,KAAK,EAAG,GAAEb,OAAO,CAACC,GAAR,CAAYa,eAAgB,EAPjB;EAQrBC,aAAa,EAAG,GAAEf,OAAO,CAACC,GAAR,CAAYe,uBAAwB;AARjC,CAAvB,C,CAWA;;AACA,OAAO,MAAMC,GAAG,GAAGzB,aAAa,CAACM,cAAD,CAAzB;AACP,OAAO,MAAMoB,QAAQ,GAAGzB,WAAW,EAA5B;AACP,OAAO,MAAM0B,IAAI,GAAGtB,OAAO,EAApB;AAEP;;AACA,OAAO,IAAIuB,4BAA4B,GAAIC,KAAD,IAAW;EAAA;;EACnD;EACA,IAAIC,gBAAgB,4BAAGD,KAAH,aAAGA,KAAH,uBAAGA,KAAK,CAAEE,gBAAV,yEAA8B,EAAlD;EACA,IAAIC,MAAM,GAAGH,KAAK,CAACI,QAAN,KAAmB,KAAnB,GAA2BH,gBAAxC;EACA,OAAOE,MAAP;AACD,CALM;AAOP,IAAIE,qBAAqB,GAAG9B,YAAY,CACtC;AAAC;AAAiD+B,IAAlD,KAA2D;EACzD,OAAOP,4BAA4B,CAACO,IAAD,CAAnC;AACD,CAHqC,EAItC;AAAC;AAAiDA,IAAlD,KAA2D;EACzD;EACA,OAAO,IAAIC,OAAJ,CAAaC,IAAD,IAAU;IAC3B,IAAIC,KAAK,GAAG,MAAM,CAAE,CAApB;;IACAA,KAAK,GAAGpC,OAAO,CAACiC,IAAD,EAAQI,QAAD,IAAc;MAClCD,KAAK;MACLD,IAAI,CAACE,QAAQ,CAACC,GAAT,EAAD,CAAJ;IACD,CAHc,CAAf;EAID,CANM,CAAP;AAOD,CAbqC,CAAxC;AAgBA,OAAO,IAAIC,WAAW,GAAG;AACvB;AAAiDN,IAD1B,KAEpB;EAAA;;EACH,IAAIO,KAAK,GAAGR,qBAAqB,CAACC,IAAD,CAAjC,CADG,CAGH;;EACAhC,SAAS,CAAC,MAAM;IACd,IAAIwC,OAAO,GAAGzC,OAAO,CAACiC,IAAD,EAAQI,QAAD,IAAc;MACxCL,qBAAqB,CAACU,OAAtB,CAA8BT,IAA9B,EAAoCI,QAAQ,CAACC,GAAT,EAApC,EADwC,CAExC;IACD,CAHoB,CAArB;IAKA,OAAO,MAAMG,OAAO,EAApB,CANc,CAOd;EACD,CARQ,EAQN,CAACf,4BAA4B,CAACO,IAAD,CAA7B,CARM,CAAT;EAUA,OAAOO,KAAP;AACD,CAjBM;;GAAID,W;UAGGP,qB"},"metadata":{},"sourceType":"module"}